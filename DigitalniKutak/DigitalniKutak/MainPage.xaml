<?xml version="1.0" encoding="utf-8" ?>
<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             x:Class="DigitalniKutak.MainPage"
             xmlns:toolkit="http://schemas.microsoft.com/dotnet/2022/maui/toolkit"
             xmlns:model="clr-namespace:DigitalniKutak.Model"
             xmlns:viewmodel="clr-namespace:DigitalniKutak.ViewModel"
             x:DataType="viewmodel:GlavniViewModel"
             Title="{Binding Title}">


    <Grid ColumnDefinitions="*,*"
          ColumnSpacing="5"
          Padding="5"
          RowSpacing="10"
          RowDefinitions="*,*,Auto">

        <CollectionView ItemsSource="{Binding Novosti}"
                        Grid.ColumnSpan="2"
                        SelectionMode="Single">
            <CollectionView.ItemTemplate>
                <DataTemplate x:DataType="model:Novost" >
                    <Frame Margin="0,150,0,150" BorderColor="Transparent">
                        <Frame.GestureRecognizers>
                            <TapGestureRecognizer CommandParameter="{Binding Id}"
                            Command="{Binding Source={RelativeSource AncestorType={x:Type viewmodel:GlavniViewModel}}, Path=OtvoriNovost}"></TapGestureRecognizer>
                        </Frame.GestureRecognizers>
                        <Grid ColumnDefinitions="125,*" ColumnSpacing="25">
                            <Image Source="{Binding SlikaPutanja,StringFormat='http://localhost:5286/{0}'}"
                               HeightRequest="120" WidthRequest="120" ></Image>
                            <VerticalStackLayout Grid.Column="1" HeightRequest="120">
                                <Label Text="{Binding Naslov}"></Label>
                                <Label Text="{Binding Sadrzaj}"></Label>
                            </VerticalStackLayout>
                        </Grid>
                    </Frame>
                </DataTemplate>
            </CollectionView.ItemTemplate>
        </CollectionView>
        <CollectionView ItemsSource="{Binding Sekcije}" 
                        Grid.ColumnSpan="2" Grid.Row="1" 
                        SelectionMode="Single">
            <CollectionView.ItemTemplate>
                <DataTemplate x:DataType="model:Sekcija">
                    <Frame BorderColor="Transparent" Margin=" 0,150,0,150">
                        <VerticalStackLayout>
                            <Label Text="{Binding Naziv}"></Label>
                            <Label Text="{Binding ProfesorId}" TextColor="MediumPurple" FontAttributes="Italic" ></Label>
                            <Label Text="{Binding Opis}"></Label>
                        </VerticalStackLayout>
                    </Frame>
                </DataTemplate>
            </CollectionView.ItemTemplate>
        </CollectionView>
         <Button Text="Ucitaj Novosti" Command="{Binding GetNovostCommand}" Grid.Row="2" Padding="10" ></Button>
        <Button Text="Ucitaj Sekcije" Command="{Binding GetSekcijeCommand}" Grid.Row="2" Grid.Column="1" Padding="10"></Button>
    </Grid>
    
    
    <!--<Grid ColumnDefinitions="*,*"
          ColumnSpacing="5"
          RowDefinitions="*,Auto"
          RowSpacing="0">
        
        <CollectionView BackgroundColor="Pink"
            Grid.ColumnSpan="2"
            ItemsSource="{Binding Novosti}"
            SelectionMode="Single">
            <CollectionView.ItemTemplate>
                <DataTemplate x:DataType="model:Novost">
                    <Grid ColumnDefinitions="175,*" Padding="10">
                        <Frame Margin="0 15 0 0" >
                            <Image Source="{Binding SlikaPutanja, StringFormat='http://localhost:5286/{0}'}" />
                        </Frame>
                        <Frame HeightRequest="175" Grid.Column="2" >
                            <VerticalStackLayout Padding="10" VerticalOptions="Center">
                                <Label Text="{Binding Naslov}"></Label>
                                <Label Text="{Binding Sadrzaj}"></Label>
                            </VerticalStackLayout>
                        </Frame>
                    </Grid>
                </DataTemplate>
            </CollectionView.ItemTemplate>
        </CollectionView>

        <Button Grid.Row="1"
        Margin="8"
        Text="Dohvati novosti"
        Command="{Binding GetNovostCommand}"
        
        />
    </Grid>-->
    <!--<Grid ColumnDefinitions="*,*"
          ColumnSpacing="5"
          RowDefinitions="*,Auto"
          RowSpacing="0">
        <toolkit:Expander>
            <toolkit:Expander.Header>
                <Button Text="Novosti"
               FontAttributes="Bold"
               FontSize="Medium" 
               />
            </toolkit:Expander.Header>
            <CollectionView BackgroundColor="Pink"
                        Grid.ColumnSpan="2"
                        ItemsSource="{Binding Novosti}"
                        SelectionMode="Single">
                <CollectionView.ItemTemplate>
                    <DataTemplate x:DataType="model:Novost">
                        <Grid Padding="10">
                            <Frame HeightRequest="175">
                                <VerticalStackLayout Padding="10" VerticalOptions="Center">
                                    <Label Text="{Binding Naslov}"></Label>
                                    <Label Text="{Binding Sadrzaj}"></Label>
                                </VerticalStackLayout>
                            </Frame>
                        </Grid>
                    </DataTemplate>
                </CollectionView.ItemTemplate>
            </CollectionView>
        </toolkit:Expander>
        <Button Grid.Row="1"
                Margin="8"
                Text="Dohvati novosti"
                Command="{Binding GetNovostCommand}"
                
                /> 
        

    </Grid>-->
    
    <!--<ScrollView>
        <VerticalStackLayout
            Padding="30,0"
            Spacing="25">
            <Image
                Source="dotnet_bot.png"
                HeightRequest="185"
                Aspect="AspectFit"
                SemanticProperties.Description="dot net bot in a race car number eight" />

            <Label
                Text="Hello, World!"
                Style="{StaticResource Headline}"
                SemanticProperties.HeadingLevel="Level1" />

            <Label
                Text="Welcome to &#10;.NET Multi-platform App UI"
                Style="{StaticResource SubHeadline}"
                SemanticProperties.HeadingLevel="Level2"
                SemanticProperties.Description="Welcome to dot net Multi platform App U I" />

            <Button
                x:Name="CounterBtn"
                Text="Click me" 
                SemanticProperties.Hint="Counts the number of times you click"
                Clicked="OnCounterClicked"
                HorizontalOptions="Fill" />
        </VerticalStackLayout>
    </ScrollView>-->

</ContentPage>
